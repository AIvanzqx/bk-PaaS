function setBtnPosition(){var t=$("#body").offset().left+$("#body").width()+10;$(window).width()>=t?$(".return_btn").css({left:t+"px"}):$(".return_btn").css({left:"auto",right:"10px",position:"fixed"})}var minHeight=100,scrollOffset=$(document).height()-$(window).height()-100,returnTopDom=$("#return_top"),returnBottomDom=$("#return_bottom");$(window).on("scroll",function(){var t=$(this).scrollTop();t>minHeight?returnTopDom.fadeIn(300):returnTopDom.fadeOut(300),t>=scrollOffset?returnBottomDom.fadeOut(300):returnBottomDom.fadeIn(300)}),$(window).on("resize",function(){setBtnPosition()}),returnTopDom.on("click",function(){return $("html,body").animate({scrollTop:0},700),!1}),returnBottomDom.on("click",function(){return $("html,body").animate({scrollTop:scrollOffset+100},700),!1}),setBtnPosition(),$(window).trigger("scroll"),BASE_APP=function(){return{pro_test_on:function(t,e){$("#pro-test").html('<span class="f_l">'+gettext("快捷入口")+'：</span><a href="'+t+'" target="_blank" class="f_l" style="width:50px;margin-left:12px;">'+gettext("测试环境")+'</a><a href="'+e+'" target="_blank" class="" style="width:50px;margin-left:135.5px;">'+gettext("正式环境")+"</a>")},pro_test_off:function(t,e){$("#pro-test").html('<span class="f_l">'+gettext("快捷入口")+'：</span><span data-toggle="tooltip" data-placement="top" title="'+gettext("应用未提测或已下架")+'" style="color:#999;width:50px;margin-left:12px;">'+gettext("测试环境")+'</span><span data-toggle="tooltip" data-placement="left" title="'+gettext("应用未上线或已下架")+'" style="color:#999;width:50px;margin-left:15.5px;">'+gettext("正式环境")+"</span>")},pro_on_test_off:function(t,e){$("#pro-test").html('<span class="f_l">'+gettext("快捷入口")+'：</span><span class="f_l" data-toggle="tooltip" data-placement="top" title="'+gettext("应用未提测或已下架")+'" style="color:#999;width:50px;margin-left:12px;">'+gettext("测试环境")+'</span><a href="'+e+'" target="_blank" class="" style="width:50px;margin-left:135.5px;">'+gettext("正式环境")+"</a>")},pro_off_test_on:function(t,e){$("#pro-test").html('<span class="f_l">'+gettext("快捷入口")+'：</span><a href="'+t+'" target="_blank" class="f_l" style="width:50px;margin-left:12px;">'+gettext("测试环境")+'</a><span data-toggle="tooltip" data-placement="left" title="'+gettext("应用未上线或已下架")+'" style="color:#999;width:50px;margin-left:13.5px;">'+gettext("正式环境")+"</span>")},refresh_app_status:function(t){var e=BLUEKING.config.paas_host()+"app/status/"+t+"/";$.get(e,{},function(t){app_test_url=t.app_test_url,app_prod_url=t.app_prod_url,1==t.result?BASE_APP.pro_test_on(app_test_url,app_prod_url):2==t.result?BASE_APP.pro_off_test_on(app_test_url,app_prod_url):3==t.result?BASE_APP.pro_on_test_off(app_test_url,app_prod_url):BASE_APP.pro_test_off(app_test_url,app_prod_url),$("#app_info_name_id").text(t.app_name),$("#app_info_name_id").attr("title",t.app_name),$("#app_logo_now").attr("src",t.app_log_url)},"json")},refresh_tpapp_status:function(t){var e=BLUEKING.config.paas_host()+"app/status/"+t+"/",o=BLUEKING.config.paas_host()+"console/?app="+t;$.get(e,{},function(t){1==t.result||3==t.result?$("#pro-test").html('<span class="f_l">'+gettext("快捷入口")+'：</span><a href="'+o+'" target="_blank" class="" style="width:50px;margin-left:73.5px;">'+gettext("访问地址")+"</a>"):$("#pro-test").html('<span class="f_l">'+gettext("快捷入口")+'：</span><span data-toggle="tooltip" data-placement="left" title="'+gettext("应用未上线或已下架")+'" style="color:#999;width:50px;margin-left:13.5px;">'+gettext("访问地址")+"</span>"),$("#app_info_name_id").text(t.app_name),$("#app_info_name_id").attr("title",t.app_name),$("#app_logo_now").attr("src",t.app_log_url)},"json")},modify_app_logo:function(t,e){var o=$("#logo_m");if(e)var a="saas";else var a="app";var l=BLUEKING.config.paas_host()+a+"/modify_app_logo/"+t+"/";$("#form_logo").attr("action",l),art.dialog({title:gettext("温馨提示"),width:340,icon:"warning",lock:!0,content:$("#div_m_logo").get(0),ok:function(){var t=document.getElementById("logo_m").value;return""==t||null==t?($("#logo_error_tips").html(gettext("请选择要上传的图片")),!1):"png"!=t.substring(t.lastIndexOf(".")+1)?($("#logo_error_tips").html(gettext("上传图片必须为png格式")),!1):o.get(0).files[0].size>6291456?($("#logo_error_tips").html(gettext("图片大小限制为6M")),!1):($("#form_logo").target="logo_target_frame",void $("#form_logo").submit())},okVal:gettext("确定"),cancel:function(){$("#logo_error_tips").html("")},cancelVal:gettext("取消")})}}}();