$(function(){var e={get_selected_system_ids:function(){var e=[];return $('input[name="system_id"]:checked').each(function(t,s){e.push($(s).val())}),e}};$('input[name="system_id"]').bind("change",function(e){$(this).is(":checked")?$(this).parents("tr").addClass("row-selected"):$(this).parents("tr").removeClass("row-selected")}),$("#systems_delete").bind("click",function(){if(system_ids=e.get_selected_system_ids(),0===system_ids.length)return void dialog({id:"bktips",fixed:!0,title:"<span style='font-size: 15px;'>"+gettext("消息")+"</span>",content:'<i class="bk-icon icon-close2" style="color: red"></i> '+gettext("请先选择待删除的系统！")}).showModal();dialog({title:"<span style='font-size: 15px'>"+gettext("删除确认")+"</span>",width:420,fixed:!0,content:gettext("该操作将删除关联的通道和组件，且不可恢复，是否继续？"),ok:function(){$.post(UrlMaker.make("system_deleted"),{system_ids:system_ids.join(",")},function(e){e.error_message?dialog({id:"bktips",lock:!0,title:"<span style='font-size: 15px;'>"+gettext("消息")+"</span<>",content:'<i class="bk-icon icon-close2" style="color: red"> '+e.error_message}).showModal():(tmp_msg=ngettext("成功删除 %s 个系统！","成功删除 %s 个系统！",e.affected_rows),tmp_msg=interpolate(tmp_msg,[e.affected_rows]),dialog({id:"bktips",lock:!0,content:'<i class="bk-icon icon-check2" style="color: green"></i>  '+tmp_msg}).show(),setTimeout(function(){window.location.reload()},2e3))})},cancel:function(){},okValue:gettext("确认删除"),cancelValue:gettext("取消")}).showModal()})});